import{u as e,j as s}from"./index-Df_F6O4f.js";import{r as t,u as r}from"./vendor-react-BJYbxeCs.js";import{a}from"./vendor-utils-qHW_S61q.js";import{a as n,b as i,c as l,L as d,E as o,d as c,H as m,D as x,X as g,e as h,M as u,f as p}from"./vendor-ui-Cf-65S3f.js";import{r as f}from"./rgms_logo-uAcWwTn1.js";const b=()=>{const[b,y]=t.useState("cadet"),[j,N]=t.useState({username:"",password:"",identifier:""}),[v,w]=t.useState(!1),[S,k]=t.useState(""),[C,z]=t.useState(!1),[A,I]=t.useState(!1),[T,M]=t.useState(!1),[O,R]=t.useState(!1),{login:U}=e(),E=r(),P=e=>{N({...j,[e.target.name]:e.target.value})},D=e=>{"access"===e?M(!0):"mobile"===e&&I(!0)};return s.jsxs("div",{className:"min-h-screen flex items-start md:items-center justify-center bg-green-900 relative overflow-hidden px-3 py-4 md:px-4 md:py-6 overflow-auto",children:[s.jsx("div",{className:"hidden md:block absolute inset-0 z-0 opacity-20",style:{backgroundImage:`url(${f})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(8px)"}}),s.jsxs("div",{className:"w-full max-w-md md:max-w-lg bg-white rounded-lg shadow-2xl overflow-hidden z-10",children:[s.jsxs("div",{className:"bg-green-900 p-4 md:p-8 text-center flex flex-col items-center rounded-t-lg",children:[s.jsx("div",{className:"w-16 h-16 md:w-24 md:h-24 mb-2 rounded-full bg-white overflow-hidden flex items-center justify-center shadow-md relative",children:s.jsx("img",{src:f,alt:"RGMS Logo",className:"w-full h-full object-contain"})}),s.jsx("h2",{className:"text-xl md:text-4xl font-extrabold text-white tracking-widest mb-1 md:mb-4 drop-shadow-sm",children:"MSU-SND RGMS"}),s.jsx("h1",{className:"text-[10px] md:text-lg font-bold text-white tracking-wider leading-tight px-2",children:"MSU-SND ROTC UNIT GRADING MANAGEMENT SYSTEM"}),s.jsx("p",{className:"text-gray-300 text-[9px] md:text-xs mt-1 uppercase tracking-wide font-medium",children:"integrated with Training Staff Attendance System"})]}),s.jsxs("div",{className:"p-4 md:p-8 pt-4 md:pt-6",children:[s.jsxs("div",{className:"flex justify-center mb-4 md:mb-6 bg-gray-100 p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>{y("cadet"),k("")},className:"flex-1 py-2 md:py-1.5 text-xs md:text-sm font-medium rounded-md transition-all duration-200 flex items-center justify-center gap-1 md:gap-2 "+("cadet"===b?"bg-white text-green-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[s.jsx(n,{size:14})," Cadet"]}),s.jsxs("button",{onClick:()=>{y("staff"),k("")},className:"flex-1 py-2 md:py-1.5 text-xs md:text-sm font-medium rounded-md transition-all duration-200 flex items-center justify-center gap-1 md:gap-2 "+("staff"===b?"bg-white text-green-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[s.jsx(i,{size:14})," Staff"]}),s.jsxs("button",{onClick:()=>{y("admin"),k("")},className:"flex-1 py-2 md:py-1.5 text-xs md:text-sm font-medium rounded-md transition-all duration-200 flex items-center justify-center gap-1 md:gap-2 "+("admin"===b?"bg-white text-green-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[s.jsx(l,{size:14})," Admin"]})]}),S&&s.jsx("div",{className:"mb-3 md:mb-4 bg-red-50 border-l-4 border-red-500 p-2.5 md:p-3 text-red-700 text-xs md:text-sm rounded",children:S}),s.jsxs("form",{onSubmit:async e=>{var s;e.preventDefault(),k(""),z(!0);try{let e;if("cadet"===b)e=await a.post("/api/auth/cadet-login",{identifier:j.identifier});else if("staff"===b)e=await a.post("/api/auth/staff-login-no-pass",{identifier:j.identifier});else{const s=(j.username||"").trim(),t=(j.password||"").trim();e=await a.post("/api/auth/login",{username:s,password:t})}const s=e.data,t={token:s.token,role:s.role,cadetId:s.cadetId,staffId:s.staffId,isProfileCompleted:s.isProfileCompleted};U(t);const r=(t.role||"").toLowerCase();"admin"===r?E("/admin/cadets"):"training_staff"===r?E("/staff/dashboard"):"cadet"===r?t.isProfileCompleted?E("/cadet/dashboard"):E("/cadet/profile"):E("/")}catch(t){if(t.response){const e=null==(s=t.response.data)?void 0:s.message;k(e||"Login failed. Please check your credentials.")}else t.request?k("Cannot reach the server. Please check your WiFi or mobile data connection and try again."):k("Unexpected error during login. Please try again.")}finally{z(!1)}},className:"space-y-3 md:space-y-5",children:[("cadet"===b||"staff"===b)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-1",children:"cadet"===b?"Student ID or Email":"Staff Username"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(n,{size:16,className:"text-gray-400"})}),s.jsx("input",{type:"text",name:"identifier",value:j.identifier,onChange:P,required:!0,className:"w-full pl-10 pr-3 py-2.5 md:py-3 text-sm md:text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-gray-50 text-gray-900 transition-colors",placeholder:"cadet"===b?"Student ID or Email":"Staff Username",style:{fontSize:"16px"}})]})]}),"admin"===b&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-1",children:"Username"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(n,{size:16,className:"text-gray-400"})}),s.jsx("input",{type:"text",name:"username",value:j.username,onChange:P,required:!0,className:"w-full pl-10 pr-3 py-2.5 md:py-3 text-sm md:text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-gray-50 text-gray-900 transition-colors",placeholder:"Admin Username",style:{fontSize:"16px"}})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(d,{size:16,className:"text-gray-400"})}),s.jsx("input",{type:v?"text":"password",name:"password",value:j.password,onChange:P,required:!0,className:"w-full pl-10 pr-11 py-2.5 md:py-3 text-sm md:text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 bg-gray-50 text-gray-900 transition-colors",placeholder:"••••••••",style:{fontSize:"16px"}}),s.jsx("button",{type:"button",onClick:()=>w(!v),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:v?s.jsx(o,{size:18}):s.jsx(c,{size:18})})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-[11px] md:text-xs",children:[s.jsxs("label",{className:"flex items-center text-gray-600 cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"form-checkbox h-3.5 w-3.5 md:h-3 md:w-3 text-green-600 rounded border-gray-300 focus:ring-green-500"}),s.jsx("span",{className:"ml-1.5",children:"Remember me"})]}),s.jsx("button",{type:"button",onClick:()=>R(!0),className:"text-green-600 hover:text-green-800 font-medium",children:"Forgot Email/Username?"})]}),s.jsx("button",{type:"submit",disabled:C,className:"w-full py-3 md:py-3.5 px-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-md shadow-lg transition duration-200 flex items-center justify-center gap-2 text-sm md:text-base "+(C?"opacity-75 cursor-wait":""),style:{minHeight:"44px"},children:C?s.jsx("span",{children:"Authenticating..."}):s.jsx(s.Fragment,{children:"Sign In"})})]}),s.jsxs("div",{className:"mt-4 md:mt-6 pt-3 md:pt-4 border-t border-gray-100 space-y-2 md:space-y-3",children:[s.jsxs("button",{type:"button",onClick:()=>D("access"),className:"w-full text-gray-600 hover:text-green-700 font-medium text-xs md:text-sm flex items-center justify-center gap-2 transition-colors group p-2 rounded hover:bg-green-50",style:{minHeight:"44px"},children:[s.jsx(m,{size:16,className:"text-gray-400 group-hover:text-green-600"}),"How to access the app"]}),s.jsxs("button",{type:"button",onClick:()=>D("mobile"),className:"w-full text-gray-600 hover:text-green-700 font-medium text-xs md:text-sm flex items-center justify-center gap-2 transition-colors group p-2 rounded hover:bg-green-50",style:{minHeight:"44px"},children:[s.jsx(x,{size:16,className:"text-gray-400 group-hover:text-green-600"}),"Download Mobile App"]})]})]})]}),T&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-green-900 p-4 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[s.jsx(m,{size:20}),"How to Access the App"]}),s.jsx("button",{onClick:()=>M(!1),className:"text-green-100 hover:text-white p-1 hover:bg-green-800 rounded-full transition-colors",children:s.jsx(g,{size:20})})]}),s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full border border-green-200",children:"Cadet"}),s.jsx(n,{size:14,className:"text-green-700"})]}),s.jsxs("ol",{className:"text-sm text-gray-700 space-y-2 list-decimal list-inside ml-1",children:[s.jsx("li",{children:"Ensure your account is approved by the ROTC Office."}),s.jsx("li",{children:"Choose Cadet, then enter your Student ID or Email."}),s.jsx("li",{children:"Tap Sign In. Complete your profile if prompted."})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs px-2 py-0.5 rounded-full border border-indigo-200",children:"Training Staff"}),s.jsx(i,{size:14,className:"text-indigo-700"})]}),s.jsxs("ol",{className:"text-sm text-gray-700 space-y-2 list-decimal list-inside ml-1",children:[s.jsx("li",{children:"Choose Staff, then enter your Staff Username."}),s.jsx("li",{children:"No password required. Tap Sign In."}),s.jsx("li",{children:"Get your username from the ROTC Office if unsure."})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded-full border border-yellow-200",children:"Admin"}),s.jsx(l,{size:14,className:"text-yellow-700"})]}),s.jsxs("ol",{className:"text-sm text-gray-700 space-y-2 list-decimal list-inside ml-1",children:[s.jsx("li",{children:"Choose Admin, then enter your Admin Username and Password."}),s.jsx("li",{children:"Tap Sign In to access the admin dashboard."}),s.jsx("li",{children:"For access issues, contact the System Admin/ROTC Office."})]})]}),s.jsx("div",{className:"text-xs text-gray-500 text-center",children:"If you do not know your credentials, contact your Platoon Leader or the ROTC Office."}),s.jsx("button",{onClick:()=>M(!1),className:"w-full mt-2 bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2.5 rounded-lg transition-colors border border-gray-200",children:"Close"})]})]})}),O&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-green-900 p-4 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[s.jsx(m,{size:20}),"Account Recovery"]}),s.jsx("button",{onClick:()=>R(!1),className:"text-green-100 hover:text-white p-1 hover:bg-green-800 rounded-full transition-colors",children:s.jsx(g,{size:20})})]}),s.jsxs("div",{className:"p-8 text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto text-green-600 mb-2",children:s.jsx(l,{size:32})}),s.jsx("h4",{className:"text-xl font-bold text-gray-800",children:"Contact Administrator"}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"For security reasons, account recovery must be handled manually. Please contact the ROTC Office Administrator or your Training Staff to recover your account or reset your password."}),s.jsx("div",{className:"pt-2",children:s.jsx("button",{onClick:()=>R(!1),className:"px-6 py-2 bg-green-600 text-white font-semibold rounded hover:bg-green-700 transition-colors",children:"Understood"})})]})]})}),A&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"bg-green-900 p-4 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[s.jsx(h,{size:20}),"Install App"]}),s.jsx("button",{onClick:()=>I(!1),className:"text-green-100 hover:text-white p-1 hover:bg-green-800 rounded-full transition-colors",children:s.jsx(g,{size:20})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3 text-green-700",children:s.jsx(x,{size:32})}),s.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-2",children:"Download Mobile App"}),s.jsx("p",{className:"text-gray-600 font-medium mb-4",children:"Get the official RGMS mobile app for the best experience."}),s.jsxs("a",{href:"/downloads/rgms-app.apk",download:"Mobile_RGMS-v2.4.apk",className:"inline-flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white font-bold rounded-full shadow-lg hover:bg-green-700 transform hover:-translate-y-1 transition-all w-full sm:w-auto",children:[s.jsx(x,{size:20}),"Download Mobile_RGMS APK v2.4"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Note: You may need to allow installation from unknown sources."})]}),s.jsxs("div",{className:"relative flex py-2 items-center",children:[s.jsx("div",{className:"flex-grow border-t border-gray-200"}),s.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-400 text-sm",children:"OR USE WEB VERSION"}),s.jsx("div",{className:"flex-grow border-t border-gray-200"})]}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-2 flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full border border-green-200",children:"Android"}),"Chrome"]}),s.jsxs("ol",{className:"text-sm text-gray-600 space-y-2 list-decimal list-inside ml-1",children:[s.jsxs("li",{children:["Open this page in ",s.jsx("strong",{children:"Chrome"}),"."]}),s.jsxs("li",{children:["Tap the ",s.jsx("strong",{children:"Menu"})," icon ",s.jsx(u,{size:14,className:"inline mx-1"})," (three dots)."]}),s.jsxs("li",{children:["Select ",s.jsx("strong",{children:'"Add to Home Screen"'})," or ",s.jsx("strong",{children:'"Install App"'}),"."]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-2 flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"bg-gray-200 text-gray-800 text-xs px-2 py-0.5 rounded-full border border-gray-300",children:"iOS"}),"Safari"]}),s.jsxs("ol",{className:"text-sm text-gray-600 space-y-2 list-decimal list-inside ml-1",children:[s.jsxs("li",{children:["Open this page in ",s.jsx("strong",{children:"Safari"}),"."]}),s.jsxs("li",{children:["Tap the ",s.jsx("strong",{children:"Share"})," icon ",s.jsx(p,{size:14,className:"inline mx-1"}),"."]}),s.jsxs("li",{children:["Scroll down and tap ",s.jsx("strong",{children:'"Add to Home Screen"'}),"."]})]})]})]}),s.jsx("button",{onClick:()=>I(!1),className:"w-full mt-6 bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2.5 rounded-lg transition-colors border border-gray-200",children:"Close"})]})]})})]})};export{b as default};
