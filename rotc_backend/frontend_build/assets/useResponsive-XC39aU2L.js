import{r as e}from"./vendor-react-BJYbxeCs.js";const t={_webglSupported:void 0,getPlatform:()=>{const e=navigator.userAgent||"",t=navigator.platform||"",o=/iPad|iPhone|iPod/.test(e)||"MacIntel"===t&&navigator.maxTouchPoints>1,r=/Android/.test(e),i=o||r||/Mobile/.test(e),n=/iPad/.test(e)||r&&!/Mobile/.test(e)||"MacIntel"===t&&navigator.maxTouchPoints>1,a=/Chrome/.test(e)&&!/Edge/.test(e),s=/Safari/.test(e)&&!/Chrome/.test(e),d=/Firefox/.test(e),p=/Edge/.test(e);return{isIOS:o,isAndroid:r,isMobile:i,isTablet:n,isDesktop:!i&&!n,browser:{isChrome:a,isSafari:s,isFirefox:d,isEdge:p,name:a?"Chrome":s?"Safari":d?"Firefox":p?"Edge":"Unknown"},isPWA:window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,userAgent:e,platform:t}},supportsFeature:e=>({touch:"ontouchstart"in window||navigator.maxTouchPoints>0,hover:window.matchMedia("(hover: hover)").matches,pointer:window.matchMedia("(pointer: fine)").matches,localStorage:(()=>{try{const e="test";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}})(),sessionStorage:(()=>{try{const e="test";return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch{return!1}})(),indexedDB:"indexedDB"in window,serviceWorker:"serviceWorker"in navigator,pushNotifications:"PushManager"in window,backgroundSync:"serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype,networkInformation:"connection"in navigator,geolocation:"geolocation"in navigator,camera:"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices,vibration:"vibrate"in navigator,battery:"getBattery"in navigator,webGL:(()=>{if(void 0!==t._webglSupported)return t._webglSupported;try{const e=document.createElement("canvas"),o=e.getContext("webgl",{preserveDrawingBuffer:!1,failIfMajorPerformanceCaveat:!0})||e.getContext("experimental-webgl",{preserveDrawingBuffer:!1});if(t._webglSupported=!!o,o)try{const e=o.getExtension("WEBGL_lose_context");e&&e.loseContext&&e.loseContext()}catch{}return t._webglSupported}catch{return t._webglSupported=!1,!1}})(),canvas:(()=>{try{const e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}catch{return!1}})(),performanceObserver:"PerformanceObserver"in window,intersectionObserver:"IntersectionObserver"in window,resizeObserver:"ResizeObserver"in window,webAssembly:"WebAssembly"in window,webWorkers:"Worker"in window,sharedArrayBuffer:"SharedArrayBuffer"in window,cssGrid:CSS.supports("display","grid"),cssFlexbox:CSS.supports("display","flex"),cssCustomProperties:CSS.supports("--test","value"),cssBackdropFilter:CSS.supports("backdrop-filter","blur(1px)"),safeArea:CSS.supports("padding","env(safe-area-inset-top)"),reducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches}[e]||!1),getCapabilities:()=>{const e=t.getPlatform();return{performanceTier:(()=>{const e=navigator.deviceMemory||4,t=navigator.hardwareConcurrency||4;return e<=2||t<=2?"low":e<=4||t<=4?"medium":"high"})(),memory:navigator.deviceMemory||4,cores:navigator.hardwareConcurrency||4,connection:navigator.connection?{effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt,saveData:navigator.connection.saveData}:{effectiveType:"unknown",downlink:10,rtt:100},maxTouchPoints:navigator.maxTouchPoints||0,screen:{width:screen.width,height:screen.height,pixelRatio:window.devicePixelRatio||1,orientation:screen.orientation?screen.orientation.type:"unknown"},viewport:{width:window.innerWidth,height:window.innerHeight},platform:e}}},o={handleTouchEvents:(e,o={})=>{const r=t.getPlatform(),{onTouchStart:i,onTouchEnd:n,onTouchMove:a,onClick:s}=o;r.isMobile?(i&&e.addEventListener("touchstart",i,{passive:!0}),n&&e.addEventListener("touchend",n,{passive:!0}),a&&e.addEventListener("touchmove",a,{passive:!1})):(i&&e.addEventListener("mousedown",i),n&&e.addEventListener("mouseup",n),a&&e.addEventListener("mousemove",a)),s&&e.addEventListener("click",s)},getPlatformClasses:()=>{const e=t.getPlatform(),o=t.getCapabilities(),r=[];return e.isIOS&&r.push("platform-ios"),e.isAndroid&&r.push("platform-android"),e.isMobile&&r.push("platform-mobile"),e.isTablet&&r.push("platform-tablet"),e.isDesktop&&r.push("platform-desktop"),e.isPWA&&r.push("platform-pwa"),r.push(`browser-${e.browser.name.toLowerCase()}`),t.supportsFeature("touch")&&r.push("supports-touch"),t.supportsFeature("hover")&&r.push("supports-hover"),t.supportsFeature("safeArea")&&r.push("supports-safe-area"),t.supportsFeature("reducedMotion")&&r.push("prefers-reduced-motion"),r.push(`performance-${o.performanceTier}`),o.connection.effectiveType&&r.push(`connection-${o.connection.effectiveType}`),o.connection.saveData&&r.push("save-data"),r.join(" ")},applyPlatformOptimizations:e=>{const r=t.getPlatform(),i=t.getCapabilities();if(e.className+=` ${o.getPlatformClasses()}`,r.isIOS){e.querySelectorAll("input, textarea, select").forEach(e=>{(""===e.style.fontSize||parseFloat(e.style.fontSize)<16)&&(e.style.fontSize="16px")}),e.style.minHeight="-webkit-fill-available"}if(r.isAndroid&&(e.style.webkitTapHighlightColor="rgba(0, 0, 0, 0.1)",e.style.webkitOverflowScrolling="touch"),"low"===i.performanceTier){e.style.setProperty("--animation-duration","0.1s"),e.style.setProperty("--transition-duration","0.1s");e.querySelectorAll('[class*="shadow"]').forEach(e=>{e.style.boxShadow="none"})}if("slow-2g"===i.connection.effectiveType||"2g"===i.connection.effectiveType){e.querySelectorAll("img").forEach(e=>{e.src.includes("cloudinary.com")&&(e.src=e.src.replace(/q_\d+/,"q_50"))})}},handleNavigation:(e,o={})=>{const r=t.getPlatform(),{replace:i=!1,external:n=!1}=o;n?r.isPWA?window.open(e,"_blank","noopener,noreferrer"):window.open(e,"_blank"):i?window.location.replace(e):window.location.href=e},getStorage:()=>{const e=t.supportsFeature("localStorage"),o=t.supportsFeature("sessionStorage");return{local:e?localStorage:{getItem:()=>null,setItem:()=>{},removeItem:()=>{},clear:()=>{}},session:o?sessionStorage:{getItem:()=>null,setItem:()=>{},removeItem:()=>{},clear:()=>{}},supported:{local:e,session:o}}}},r=640,i=768,n=1024,a=1280,s=1536,d={top:0,right:0,bottom:0,left:0},p=()=>{if("undefined"==typeof window)return"lg";const e=window.innerWidth;return e>=s?"2xl":e>=a?"xl":e>=n?"lg":e>=i?"md":e>=r?"sm":"xs"},c=()=>"undefined"!=typeof window&&window.innerWidth<i,l=()=>"undefined"!=typeof window&&(c()&&window.innerHeight>window.innerWidth),u=()=>"undefined"!=typeof window&&(c()&&window.innerWidth>window.innerHeight),w=()=>{if("undefined"==typeof window||!CSS.supports("padding","env(safe-area-inset-top)"))return d;const e=getComputedStyle(document.documentElement);return{top:parseInt(e.getPropertyValue("env(safe-area-inset-top)"))||0,right:parseInt(e.getPropertyValue("env(safe-area-inset-right)"))||0,bottom:parseInt(e.getPropertyValue("env(safe-area-inset-bottom)"))||0,left:parseInt(e.getPropertyValue("env(safe-area-inset-left)"))||0}},f=()=>{if("undefined"==typeof window)return{isLowEndDevice:!1,connectionType:"unknown",batteryLevel:null,supportsTouch:!1,supportsHover:!0,platform:{isMobile:!1,isIOS:!1,isAndroid:!1}};const e=t.getPlatform(),o=t.getCapabilities();return{isLowEndDevice:"low"===o.performanceTier,connectionType:o.connection.effectiveType,batteryLevel:null,supportsTouch:t.supportsFeature("touch"),supportsHover:t.supportsFeature("hover"),platform:e,capabilities:o,features:{localStorage:t.supportsFeature("localStorage"),serviceWorker:t.supportsFeature("serviceWorker"),pushNotifications:t.supportsFeature("pushNotifications"),geolocation:t.supportsFeature("geolocation"),camera:t.supportsFeature("camera"),vibration:t.supportsFeature("vibration"),safeArea:t.supportsFeature("safeArea"),reducedMotion:t.supportsFeature("reducedMotion")}}},m=()=>{if("undefined"==typeof window)return!1;return t.getPlatform().isMobile},g=()=>{if("undefined"==typeof window)return!1;return t.getPlatform().isIOS},v=()=>{if("undefined"==typeof window)return!1;return t.getPlatform().isAndroid},h=()=>{if("undefined"==typeof window)return!1;return t.getPlatform().isPWA},b=()=>{const[t,r]=e.useState({currentBreakpoint:p(),isMobile:c(),isMobilePortrait:l(),isMobileLandscape:u(),safeAreaInsets:w(),deviceCapabilities:f(),orientation:"undefined"!=typeof window?window.innerHeight>window.innerWidth?"portrait":"landscape":"portrait",keyboardVisible:!1,keyboardHeight:0,platform:{isMobile:m(),isIOS:g(),isAndroid:v(),isPWA:h()},platformClasses:o.getPlatformClasses()}),i=e.useCallback(()=>{r(e=>({...e,currentBreakpoint:p(),isMobile:c(),isMobilePortrait:l(),isMobileLandscape:u(),safeAreaInsets:w(),orientation:window.innerHeight>window.innerWidth?"portrait":"landscape"}))},[]),n=e.useCallback(((e,t)=>{let o;return function(...r){clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),e(...r)},t)}})(i,150),[i]),a=e.useCallback(()=>{if("undefined"==typeof window||!c())return;const e=window.innerHeight,t=()=>{const t=window.innerHeight,o=e-t,i=o>150;r(e=>({...e,keyboardVisible:i,keyboardHeight:i?o:0}))};if(window.visualViewport){const e=()=>{const e=window.innerHeight-window.visualViewport.height;r(t=>({...t,keyboardVisible:e>150,keyboardHeight:Math.max(0,e)}))};return window.visualViewport.addEventListener("resize",e),()=>window.visualViewport.removeEventListener("resize",e)}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);return e.useEffect(()=>{if("undefined"==typeof window)return;window.addEventListener("resize",n);const e=()=>{setTimeout(i,100)};window.addEventListener("orientationchange",e);const t=a();return i(),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",e),t&&t()}},[n,i,a]),t},y=()=>{const e=b();return{isMobile:e.isMobile,isPortrait:e.isMobilePortrait,isLandscape:e.isMobileLandscape,keyboardVisible:e.keyboardVisible,keyboardHeight:e.keyboardHeight,safeAreaInsets:e.safeAreaInsets,deviceCapabilities:e.deviceCapabilities}},S=()=>{const{safeAreaInsets:t}=b(),o=e.useCallback((e="all")=>{const o={};switch(e){case"top":t.top>0&&(o.paddingTop=`max(1rem, ${t.top}px)`);break;case"bottom":t.bottom>0&&(o.paddingBottom=`max(1rem, ${t.bottom}px)`);break;case"horizontal":t.left>0&&(o.paddingLeft=`max(1rem, ${t.left}px)`),t.right>0&&(o.paddingRight=`max(1rem, ${t.right}px)`);break;default:t.top>0&&(o.paddingTop=`max(1rem, ${t.top}px)`),t.bottom>0&&(o.paddingBottom=`max(1rem, ${t.bottom}px)`),t.left>0&&(o.paddingLeft=`max(1rem, ${t.left}px)`),t.right>0&&(o.paddingRight=`max(1rem, ${t.right}px)`)}return o},[t]);return{safeAreaInsets:t,applySafeAreaStyle:o,hasSafeArea:Object.values(t).some(e=>e>0)}};export{S as a,f as g,y as u};
