import{j as e}from"./index-Df_F6O4f.js";import{r as t,u as s,b as n}from"./vendor-react-BJYbxeCs.js";import{X as r}from"./vendor-ui-Cf-65S3f.js";import{u as a,g as o}from"./useResponsive-XC39aU2L.js";const i=({type:n,icon:a,count:o,notifications:i,onClear:d,onMarkRead:l,navigateToMessage:c,navigateToBroadcast:m})=>{const[u,p]=t.useState(!1),g=t.useRef(null),h=s();t.useEffect(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return e.jsxs("div",{className:"relative",ref:g,children:[e.jsxs("button",{onClick:()=>p(!u),className:"relative p-2 text-gray-600 hover:text-green-700 transition-colors rounded-full hover:bg-gray-100 hover-highlight hover-icon-highlight",title:n,children:[e.jsx(a,{size:22}),o>0&&e.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-red-600 rounded-full",children:o})]}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 w-[85vw] max-w-[20rem] sm:w-80 bg-white rounded-md shadow-lg overflow-hidden z-20 border border-gray-200",children:[e.jsxs("div",{className:"py-2 px-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-700",children:n}),i.length>0&&e.jsx("button",{onClick:d,className:"text-xs text-red-600 hover:text-red-800",children:"Clear All"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:0===i.length?e.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No new notifications"}):i.map(t=>e.jsxs("div",{className:"p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer flex justify-between items-start",onClick:()=>(e=>{void 0!==e.subject||void 0!==e.admin_reply||"ask_admin_reply"===e.type||"ask_admin"===e.type?h(c||"/admin/messages"):"staff_chat"===e.type?h("/staff/communication"):h(m||"/admin/broadcasts"),l(e.id)})(t),children:[e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("p",{children:t.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(t.created_at).toLocaleString()})]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),l(t.id)},className:"text-gray-400 hover:text-red-500",children:e.jsx(r,{size:14})})]},t.id))})]})]})},d=n.createContext({insets:{top:0,right:0,bottom:0,left:0}}),l=({children:t})=>{const s={top:"undefined"!=typeof window&&parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sat")||"0",10)||0,right:"undefined"!=typeof window&&parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sar")||"0",10)||0,bottom:"undefined"!=typeof window&&parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")||"0",10)||0,left:"undefined"!=typeof window&&parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sal")||"0",10)||0};return e.jsx(d.Provider,{value:{insets:s},children:t})},c=({children:t,className:s=""})=>{const{insets:r}=n.useContext(d),a={paddingTop:r.top,paddingRight:r.right,paddingBottom:r.bottom,paddingLeft:r.left};return e.jsx("div",{className:s,style:a,children:t})},m=({children:t,position:s,respectSafeArea:r=!1,className:a=""})=>{const{insets:o}=n.useContext(d),i={};return r&&("top"!==s&&"left"!==s||(i.paddingTop=o.top,i.paddingLeft=o.left),"bottom"!==s&&"right"!==s||(i.paddingBottom=o.bottom,i.paddingRight=o.right)),e.jsx("div",{className:a,style:i,children:t})},u=({children:e})=>e,p=({children:s,className:n="",preserveFixed:r=!1,...i})=>{const{isMobile:d}=a(),[l,c]=t.useState(!1),[m,u]=t.useState(!1),p=t.useRef(null);return t.useEffect(()=>{const e=o();c(e.isLowEndDevice);const t=window.matchMedia("(prefers-reduced-motion: reduce)");u(t.matches);const s=e=>u(e.matches);return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[]),t.useEffect(()=>{if(!p.current)return;const e=p.current;return e.style.setProperty("--animation-enabled",m||l?"0":"1"),e.style.setProperty("--animation-duration",m||l?"0.1s":"0.3s"),e.style.setProperty("--transition-duration",m||l?"0.1s":"0.2s"),l||r||(e.style.transform="translateZ(0)",e.style.willChange="transform, opacity"),()=>{e&&(e.style.removeProperty("--animation-enabled"),e.style.removeProperty("--animation-duration"),e.style.removeProperty("--transition-duration"),r||(e.style.transform="",e.style.willChange=""))}},[l,m,r]),e.jsx("div",{ref:p,className:`animation-optimizer ${n}`,"data-mobile":d,"data-low-end":l,"data-reduced-motion":m,...i,children:s})},g=({children:e})=>e;export{p as A,g as C,m as F,u as M,i as N,l as S,c as a};
