import{j as e}from"./index-b5aGx8Xb.js";import{r,b as t}from"./vendor-react-BJYbxeCs.js";import{c as a}from"./vendor-utils-qHW_S61q.js";import{u as s}from"./useResponsive-XC39aU2L.js";import{a6 as i,a5 as l,y as d,aJ as n,aK as o}from"./vendor-ui-Cf-65S3f.js";const c=({data:c=[],columns:g=[],loading:x=!1,emptyMessage:y="No data found",className:h="",onRowClick:m,selectable:b=!1,selectedItems:u=[],onSelectionChange:p,sortable:k=!1,filterable:j=!1,pagination:v=!1,itemsPerPage:f=10,actions:N=[],cardLayout:w="auto",...C})=>{const{isMobile:S}=s(),[M,z]=r.useState({key:null,direction:"asc"}),[H,P]=r.useState({}),[L,W]=r.useState(1),[F,R]=r.useState(!1),A="always"===w||"auto"===w&&S,J=t.useMemo(()=>k&&M.key?[...c].sort((e,r)=>{const t=e[M.key],a=r[M.key];if(null==t)return 1;if(null==a)return-1;if("string"==typeof t&&"string"==typeof a){const e=t.toLowerCase().localeCompare(a.toLowerCase());return"asc"===M.direction?e:-e}return t<a?"asc"===M.direction?-1:1:t>a?"asc"===M.direction?1:-1:0}):c,[c,M,k]),O=t.useMemo(()=>j&&0!==Object.keys(H).length?J.filter(e=>Object.entries(H).every(([r,t])=>{if(!t)return!0;const a=e[r];return null!=a&&String(a).toLowerCase().includes(String(t).toLowerCase())})):J,[J,H,j]),$=t.useMemo(()=>{if(!v)return O;const e=(L-1)*f;return O.slice(e,e+f)},[O,L,f,v]),G=Math.ceil(O.length/f),I=e=>{k&&z(r=>({key:e,direction:r.key===e&&"asc"===r.direction?"desc":"asc"}))},K=e=>{b&&p&&(u.includes(e)?p(u.filter(r=>r!==e)):p([...u,e]))},q=$.length>0&&$.every(e=>u.includes(e.id||e.key));return x?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:a("bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",h),...C,children:[j&&e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:()=>R(!F),className:"flex items-center space-x-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 touch-target",children:[e.jsx(i,{size:16}),e.jsx("span",{children:F?"Hide Filters":"Show Filters"}),F?e.jsx(l,{size:16}):e.jsx(d,{size:16})]})}),(()=>{if(!k||!A)return null;const r=g.filter(e=>!1!==e.sortable);return 0===r.length?null:e.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Sort by:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:M.key||"",onChange:e=>{e.target.value?I(e.target.value):z({key:null,direction:"asc"})},className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target",style:{minHeight:"44px",minWidth:"120px"},children:[e.jsx("option",{value:"",children:"None"}),r.map(r=>e.jsx("option",{value:r.key,children:r.label},r.key))]}),M.key&&e.jsx("button",{onClick:()=>I(M.key),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-md transition-colors touch-target",title:"Sort "+("asc"===M.direction?"descending":"ascending"),style:{minHeight:"44px",minWidth:"44px"},children:"asc"===M.direction?e.jsx(n,{size:20}):e.jsx(o,{size:20})})]})]})})})(),A?e.jsx("div",{className:"p-4",children:0===$.length?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:y}):e.jsx("div",{className:"space-y-4",children:$.map((r,t)=>e.jsxs("div",{className:a("bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 space-y-3 transition-all duration-200",m&&"cursor-pointer hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600 active:scale-[0.98]"),onClick:()=>m&&m(r),children:[(b||N.length>0)&&e.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-gray-100 dark:border-gray-700",children:[b&&e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.includes(r.id||r.key),onChange:()=>K(r.id||r.key),onClick:e=>e.stopPropagation(),className:"w-3 h-3 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select"})]}),N.length>0&&e.jsx("div",{className:"flex items-center space-x-1",children:N.map((t,s)=>e.jsx("button",{onClick:e=>{e.stopPropagation(),t.onClick(r)},className:a("p-2 rounded-lg transition-all duration-200 touch-target active:scale-95",t.className||"text-gray-600 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-100 dark:hover:bg-gray-700"),title:t.label,style:{minHeight:"44px",minWidth:"44px"},children:t.icon&&e.jsx(t.icon,{size:18})},s))})]}),e.jsx("div",{className:"space-y-3",children:g.map((t,s)=>{const i=r[t.key];if(null==i||""===i)return null;const l=0===s,d=t.render?t.render(i,r):i;return e.jsxs("div",{className:a("flex flex-col space-y-1",l&&"pb-2 border-b border-gray-100 dark:border-gray-700"),children:[e.jsx("span",{className:a("font-medium text-gray-500 dark:text-gray-400",l?"text-xs uppercase tracking-wide":"text-sm"),children:t.label}),e.jsx("span",{className:a("text-gray-900 dark:text-gray-100 break-words",l?"text-lg font-semibold":"text-sm"),children:d})]},t.key)})}),m&&e.jsx("div",{className:"absolute inset-0 rounded-lg pointer-events-none opacity-0 bg-blue-50 dark:bg-blue-900/20 transition-opacity duration-200 group-active:opacity-100"})]},r.id||r.key||t))})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsxs("thead",{className:"bg-gray-50 dark:bg-gray-800",children:[e.jsxs("tr",{children:[b&&e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:q,onChange:e=>(e=>{if(b&&p)if(e){const e=$.map(e=>e.id||e.key);p([...new Set([...u,...e])])}else{const e=$.map(e=>e.id||e.key);p(u.filter(r=>!e.includes(r)))}})(e.target.checked),className:"w-3 h-3 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})}),g.map(r=>e.jsx("th",{className:a(r.headerClassName||"px-4 py-3","text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",k&&!1!==r.sortable&&"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 select-none","center"===r.align&&"text-center","right"===r.align&&"text-right",r.headerClassName&&r.headerClassName),onClick:()=>!1!==r.sortable&&I(r.key),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:r.label}),k&&!1!==r.sortable&&M.key===r.key&&("asc"===M.direction?e.jsx(n,{size:14}):e.jsx(o,{size:14}))]})},r.key)),N.length>0&&e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]}),j&&F&&e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[b&&e.jsx("th",{className:"px-4 py-2"}),g.map(r=>e.jsx("th",{className:"px-4 py-2",children:!1!==r.filterable&&e.jsx("input",{type:"text",placeholder:`Filter ${r.label.toLowerCase()}...`,value:H[r.key]||"",onChange:e=>{return t=r.key,a=e.target.value,P(e=>({...e,[t]:a})),void W(1);var t,a},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 touch-target"})},`filter-${r.key}`)),N.length>0&&e.jsx("th",{className:"px-4 py-2"})]})]}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===$.length?e.jsx("tr",{children:e.jsx("td",{colSpan:g.length+(b?1:0)+(N.length>0?1:0),className:"px-4 py-12 text-center text-gray-500 dark:text-gray-400",children:y})}):$.map((r,t)=>e.jsxs("tr",{className:a("border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",m&&"cursor-pointer"),onClick:()=>m&&m(r),children:[b&&e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:u.includes(r.id||r.key),onChange:()=>K(r.id||r.key),onClick:e=>e.stopPropagation(),className:"w-3 h-3 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})}),g.map(t=>e.jsx("td",{className:a(t.cellClassName||"px-4 py-3","text-sm text-gray-900 dark:text-gray-100 align-baseline min-h-[44px]","center"===t.align&&"text-center","right"===t.align&&"text-right",t.cellClassName&&t.cellClassName),children:t.render?t.render(r[t.key],r):r[t.key]},t.key)),N.length>0&&e.jsx("td",{className:"px-3 py-3 text-right",children:e.jsx("div",{className:"flex items-center justify-end space-x-1",children:N.map((t,s)=>e.jsx("button",{onClick:e=>{e.stopPropagation(),t.onClick(r)},className:a("p-2 rounded-lg transition-colors touch-target",t.className||"text-gray-600 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-100 dark:hover:bg-gray-700"),title:t.label,style:{minHeight:"44px",minWidth:"44px"},children:t.icon&&e.jsx(t.icon,{size:18})},s))})})]},r.id||r.key||t))})]})}),(()=>{if(!v||G<=1)return null;const r=[],t=S?3:5,s=Math.floor(t/2);let i=Math.max(1,L-s),l=Math.min(G,i+t-1);l-i+1<t&&(i=Math.max(1,l-t+1));for(let e=i;e<=l;e++)r.push(e);return e.jsxs("div",{className:a("bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",S?"px-4 py-4 space-y-3":"px-4 py-3 flex items-center justify-between"),children:[e.jsxs("div",{className:a("text-sm text-gray-700 dark:text-gray-300",S?"text-center":"flex items-center"),children:["Showing ",(L-1)*f+1," to ",Math.min(L*f,O.length)," of ",O.length," results"]}),e.jsxs("div",{className:a("flex items-center justify-center",S?"space-x-2":"space-x-1"),children:[e.jsx("button",{onClick:()=>W(e=>Math.max(1,e-1)),disabled:1===L,className:a("font-medium text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-target",S?"px-4 py-3 text-sm":"px-3 py-2 text-sm"),style:{minHeight:"44px"},children:S?"← Prev":"Previous"}),S?e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[L," of ",G]})}):r.map(r=>e.jsx("button",{onClick:()=>W(r),className:a("px-3 py-2 text-sm font-medium rounded-md touch-target transition-colors",r===L?"text-blue-600 bg-blue-50 dark:bg-blue-900 dark:text-blue-300 border border-blue-300 dark:border-blue-700":"text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"),style:{minHeight:"44px",minWidth:"44px"},children:r},r)),e.jsx("button",{onClick:()=>W(e=>Math.min(G,e+1)),disabled:L===G,className:a("font-medium text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-target",S?"px-4 py-3 text-sm":"px-3 py-2 text-sm"),style:{minHeight:"44px"},children:S?"Next →":"Next"})]}),S&&G>5&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Go to page:"}),e.jsx("select",{value:L,onChange:e=>W(Number(e.target.value)),className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target",style:{minHeight:"44px",minWidth:"80px"},children:Array.from({length:G},(e,r)=>r+1).map(r=>e.jsx("option",{value:r,children:r},r))})]})]})})()]})};export{c as R};
