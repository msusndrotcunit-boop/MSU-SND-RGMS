services:
  - type: web
    name: rotc-grading-system
    env: node
    buildCommand: npm run build
    startCommand: npm start
    autoDeploy: true
    healthCheckPath: /health
    envVars:
      - key: ENABLE_CADET_AUTO_SYNC
        value: "false"
      - key: REDIRECT_ENABLED
        value: "true"
      - key: REDIRECT_FROM_HOSTS
        value: "localhost"
      - key: REDIRECT_TARGET_HOST
        value: "localhost"
  - type: cron
    name: rotc-grading-keepalive
    schedule: "* * * * *"
    env: docker
    command: 'curl -s http://localhost:8000/api/health || true'
